"use strict";exports.id=477,exports.ids=[477],exports.modules={6477:(t,e,r)=>{r.r(e),r.d(e,{default:()=>u});var i=r(2048),n=r.n(i),o=r(5315),s=r.n(o);let a=s().join(process.cwd(),"data","activities.json");function c(){let t=s().join(process.cwd(),"data");n().existsSync(t)||n().mkdirSync(t,{recursive:!0})}let l=[{id:1,type:"project",action:"update",text:"3D Stuhl-Modellierung Projekt aktualisiert",timestamp:new Date("2023-10-15T15:45:00").toISOString()},{id:2,type:"project",action:"upload",text:"Neues Modell hochgeladen: chair.glb",timestamp:new Date("2023-10-14T10:23:00").toISOString()},{id:3,type:"project",action:"edit",text:"Projekt 'Projekt Zwei' bearbeitet",timestamp:new Date("2023-03-19T11:30:00").toISOString()}];function d(){c();try{if(!n().existsSync(a))return n().writeFileSync(a,JSON.stringify(l,null,2)),l;let t=n().readFileSync(a,"utf8");return JSON.parse(t)}catch(t){return console.error("Error reading activities file:",t),l}}function u(t,e){switch(t.method){case"GET":e.status(200).json(d());break;case"POST":try{let{type:r,action:i,text:o}=t.body;if(!r||!i||!o)return e.status(400).json({error:"Invalid data. Required fields: type, action, text"});let s=function(t,e,r){let i=d(),o={id:Date.now(),type:t,action:e,text:r,timestamp:new Date().toISOString()},s=i.filter(t=>t.text!==r);return s.unshift(o),function(t){c();try{n().writeFileSync(a,JSON.stringify(t,null,2))}catch(t){return console.error("Error saving activities file:",t),!1}}(s.slice(0,50)),o}(r,i,o);e.status(201).json(s)}catch(t){console.error("Error in POST /api/activities:",t),e.status(500).json({error:"Internal server error"})}break;default:e.setHeader("Allow",["GET","POST"]),e.status(405).end(`Method ${t.method} Not Allowed`)}}}};