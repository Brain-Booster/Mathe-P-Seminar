(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[335],{6405:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contact",function(){return r(172)}])},172:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(5893),i=r(9008),o=r.n(i),a=r(4609),l=r.n(a),s=r(6501),c=r(9402),d=r(2482),h=r(1664),m=r.n(h),g=r(7294);function u(){let{theme:e}=(0,d.F)(),[t,r]=(0,g.useState)({projectCount:0,visitorCount:0}),[i,a]=(0,g.useState)([]),[h,m]=(0,g.useState)(!0);(0,g.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/stats",{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!e.ok)throw Error("Failed to fetch stats");let t=await e.json();r(t)}catch(e){console.error("Error fetching stats:",e)}finally{m(!1)}};e();let t=setInterval(e,1e4);return()=>{clearInterval(t)}},[]),(0,g.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/activities",{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!e.ok)throw Error("Failed to fetch activities");let t=await e.json(),r=[],n=new Set;t.forEach(e=>{n.has(e.text)||(n.add(e.text),r.push(e))}),a(r)}catch(e){console.error("Error fetching activities:",e)}};e();let t=setInterval(e,5e3);return()=>{clearInterval(t)}},[]);let u=e=>{let t=new Date(e),r=new Date,n=new Date(r);return(n.setDate(n.getDate()-1),t.toDateString()===r.toDateString())?"Heute, ".concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0")):t.toDateString()===n.toDateString()?"Gestern, ".concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0")):t.toLocaleDateString("de-DE",{day:"numeric",month:"long",year:"numeric"})};return(0,n.jsxs)("div",{className:l().container,children:[(0,n.jsxs)(o(),{children:[(0,n.jsx)("title",{children:"Admin Dashboard | Schulprojekt"}),(0,n.jsx)("meta",{name:"description",content:"Admin Dashboard f\xfcr das Schulprojekt"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)(s.Z,{}),(0,n.jsx)("main",{className:l().main,children:(0,n.jsxs)("div",{style:{width:"100%",maxWidth:"1200px",margin:"0 auto"},children:[(0,n.jsx)("h1",{style:{fontSize:"2.5rem",marginBottom:"2rem",color:"var(--title-color)",fontWeight:700},children:"Admin Dashboard"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1.5rem",marginBottom:"3rem"},children:[(0,n.jsx)(x,{title:"Projekte verwalten",description:"Projekte erstellen, bearbeiten und l\xf6schen",href:"/contact/projects",icon:"\uD83D\uDCC1"}),(0,n.jsx)(x,{title:"Team Mitglieder Verwalten",description:"Team Mitglieder hinzuf\xfcgen, bearbeiten und l\xf6schen",href:"/contact/team",icon:"\uD83D\uDC65"})]}),(0,n.jsxs)("div",{style:{padding:"1.5rem",backgroundColor:"var(--card-bg)",borderRadius:"8px",marginBottom:"2rem"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.2rem",marginTop:0,marginBottom:"1rem",color:"var(--heading-color)"},children:"Quick Stats"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"1rem"},children:[(0,n.jsx)(f,{title:"Projekte",value:h?"...":t.projectCount.toString()}),(0,n.jsx)(f,{title:"Besucher/Monat",value:h?"...":t.visitorCount.toString()})]})]}),(0,n.jsxs)("div",{style:{padding:"1.5rem",backgroundColor:"var(--card-bg)",borderRadius:"8px"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.2rem",marginTop:0,marginBottom:"1rem",color:"var(--heading-color)"},children:"Letzte Aktivit\xe4ten"}),(0,n.jsx)("div",{style:{color:"var(--text-color)",maxHeight:i.length>3?"300px":"auto",overflowY:i.length>3?"auto":"visible",paddingRight:i.length>3?"8px":"0"},children:i.length>0?i.map(e=>(0,n.jsx)(p,{text:e.text,time:u(e.timestamp),type:e.type},e.id)):(0,n.jsx)("div",{style:{padding:"1rem 0",fontSize:"0.9rem"},children:"Keine Aktivit\xe4ten gefunden."})})]})]})}),(0,n.jsx)(c.Z,{})]})}function x(e){let{title:t,description:r,href:i,icon:o}=e;return(0,n.jsx)(m(),{href:i,style:{textDecoration:"none"},children:(0,n.jsxs)("div",{style:{padding:"1.5rem",backgroundColor:"var(--card-bg)",borderRadius:"8px",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer",height:"100%",border:"1px solid var(--border-color)",display:"flex",flexDirection:"column"},className:"admin-card",children:[(0,n.jsx)("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:o}),(0,n.jsx)("h3",{style:{margin:"0 0 0.5rem",fontSize:"1.2rem",color:"var(--heading-color)"},children:t}),(0,n.jsx)("p",{style:{margin:"0",color:"var(--text-light)",fontSize:"0.9rem",flex:1},children:r})]})})}function f(e){let{title:t,value:r}=e;return(0,n.jsxs)("div",{style:{padding:"1rem",backgroundColor:"rgba(var(--bg-rgb), 0.5)",borderRadius:"6px",textAlign:"center"},children:[(0,n.jsx)("h3",{style:{margin:"0 0 0.5rem",fontSize:"0.9rem",color:"var(--text-light)"},children:t}),(0,n.jsx)("p",{style:{margin:"0",fontSize:"1.8rem",fontWeight:"bold",color:"var(--accent-blue)"},children:r})]})}function p(e){let{text:t,time:r,type:i}=e;return(0,n.jsxs)("div",{style:{padding:"0.8rem 0",borderBottom:"1px solid var(--border-color)",fontSize:"0.9rem",display:"flex",alignItems:"flex-start",gap:"0.8rem"},children:[(0,n.jsx)("div",{style:{fontSize:"1.2rem",marginTop:"2px"},children:"project"===i?"\uD83D\uDCC1":"team"===i?"\uD83D\uDC64":"\uD83D\uDCDD"}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("div",{style:{marginBottom:"0.3rem"},children:t}),(0,n.jsx)("div",{style:{color:"var(--text-light)",fontSize:"0.8rem"},children:r})]})]})}}},function(e){e.O(0,[664,371,888,774,179],function(){return e(e.s=6405)}),_N_E=e.O()}]);