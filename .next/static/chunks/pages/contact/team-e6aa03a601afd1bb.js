(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[562],{5133:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contact/team",function(){return r(8790)}])},9877:function(e,t,r){"use strict";r.d(t,{ZQ:function(){return o},dD:function(){return n},j_:function(){return i},xE:function(){return l}});let o=[];function n(){return console.warn("getClientProjectsSync is deprecated. Use getClientProjects() instead."),[]}async function i(){let e=await fetch("/api/projects");if(!e.ok)throw Error("Failed to fetch projects: "+e.status);return e.json()}async function l(e){let t=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to update projects: "+t.status);return t.json()}},5286:function(e,t,r){"use strict";function o(){try{let e=localStorage.getItem("teamMembers");return e?JSON.parse(e):null}catch(e){return console.error("Error getting team members from localStorage:",e),null}}async function n(){try{let e=await fetch("/api/team");if(!e.ok)throw Error("Failed to fetch team members");return await e.json()}catch(e){throw console.error("Error fetching team members:",e),e}}function i(e){try{return localStorage.setItem("teamMembers",JSON.stringify(e)),Promise.resolve(e)}catch(e){return console.error("Error updating team members in localStorage:",e),Promise.reject(e)}}r.d(t,{Lp:function(){return n},Y7:function(){return i},nY:function(){return o}})},8790:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var o=r(5893),n=r(9008),i=r.n(n),l=r(4609),a=r.n(l),s=r(6501),d=r(9402),c=r(2482),p=r(7294),m=r(1664),h=r.n(m),u=r(5286),g=r(9877);function x(){let{theme:e}=(0,c.F)(),t="dark"===e,[r,n]=(0,p.useState)([]),[l,m]=(0,p.useState)(""),[x,f]=(0,p.useState)("list"),[j,b]=(0,p.useState)(null),[y,v]=(0,p.useState)(!1),[k,w]=(0,p.useState)({id:"",name:"",nachname:"",projekt:"",projektId:"",profileImage:"/team/default-avatar.png",specializations:[]}),[C,S]=(0,p.useState)(""),[I,z]=(0,p.useState)(!1),B=(0,p.useRef)(null),[E,L]=(0,p.useState)([]);(0,p.useEffect)(()=>{let e=async()=>{try{let e=(0,u.nY)();n(e);let t=await (0,u.Lp)();n(t),console.log("Admin: Team members loaded:",t.length);let r=await (0,g.j_)();L(r),v(!0)}catch(e){console.error("Error loading data:",e),v(!0)}};{let t;return e(),"list"===x&&(t=setInterval(e,1e4)),()=>{t&&clearInterval(t)}}},[x]);let T=y?(r||[]).filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.nachname.toLowerCase().includes(l.toLowerCase())||e.projekt.toLowerCase().includes(l.toLowerCase())):[];(0,p.useEffect)(()=>{j?w({id:j.id,name:j.name||"",nachname:j.nachname||"",projekt:j.projekt||"",projektId:j.projektId||"",profileImage:j.profileImage||"/team/default-avatar.png",specializations:j.specializations||[]}):"new"===x&&w({id:r&&r.length>0?Math.max(...r.map(e=>e.id))+1:1,name:"",nachname:"",projekt:"",projektId:"",profileImage:"/team/default-avatar.png",specializations:[]})},[j,x,r]);let M=e=>{let{name:t,value:r}=e.target;if("projektId"===t){let e=E.find(e=>e.id.toString()===r);w({...k,projektId:r,projekt:e?e.title:""})}else w(e=>({...e,[t]:r}))},N=async e=>{e.preventDefault(),z(!0);try{let e;"edit"===x?e=r.map(e=>e.id===k.id?k:e):"new"===x&&(e=[...r,k]);let t=r.find(e=>e.id===k.id);if(k.projektId&&(!t||t.projektId!==k.projektId)){let e=E.find(e=>e.id.toString()===k.projektId);if(e){let t="".concat(k.name," ").concat(k.nachname);if(!e.team||!e.team.includes(t)){let e=E.map(e=>{if(e.id.toString()===k.projektId){let r=e.team?[...e.team,t]:[t];return{...e,team:r}}return e});(0,g.updateMockProjects)(e).then(()=>{console.log("Project team members updated successfully")}).catch(e=>{console.error("Error updating project team members:",e)})}}}if(t&&t.projektId&&t.projektId!==k.projektId){let e=E.find(e=>e.id.toString()===t.projektId);if(e&&e.team){let r="".concat(t.name," ").concat(t.nachname);if(e.team.includes(r)){let e=E.map(e=>e.id.toString()===t.projektId?{...e,team:e.team.filter(e=>e!==r)}:e);(0,g.updateMockProjects)(e).then(()=>{console.log("Member removed from previous project")}).catch(e=>{console.error("Error updating previous project:",e)})}}}let o=await fetch("/api/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!o.ok)throw Error("Server error "+o.status);let i=await (0,u.Lp)();n(i),f("list"),b(null),z(!1)}catch(e){console.error("Error in form submission:",e),z(!1)}},P=async e=>{let t=e.target.files[0];if(t)try{let e=new FormData;e.append("file",t),e.append("fileType","images");let r=await fetch("/api/upload",{method:"POST",body:e});if(!r.ok)throw Error("Upload failed");let o=await r.json();w(e=>({...e,profileImage:o.fileUrl})),console.log("Image uploaded successfully:",o.fileUrl)}catch(e){console.error("Error uploading image:",e),alert("Failed to upload image. Please try again.")}},R=()=>{b(null),w({id:null,name:"",nachname:"",projekt:"",projektId:"",profileImage:"",specializations:[]}),f("new")},W=e=>{var t;b(e),w({...e,projektId:e.projekt?null===(t=E.find(t=>t.title===e.projekt))||void 0===t?void 0:t.id.toString():""}),f("edit")},_=async e=>{if(!window.confirm("Sind Sie sicher, dass Sie dieses Teammitglied l\xf6schen m\xf6chten?"))return;let t=r.filter(t=>t.id!==e);try{let e=await fetch("/api/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("Server responded with "+e.status);let r=await (0,u.Lp)();n(r)}catch(e){console.error("Error deleting team member:",e)}},A=()=>{""===C.trim()||k.specializations.includes(C.trim())||(w(e=>({...e,specializations:[...e.specializations,C.trim()]})),S(""))},O=e=>{w(t=>({...t,specializations:t.specializations.filter(t=>t!==e)}))};return(0,o.jsxs)("div",{className:a().container,children:[(0,o.jsxs)(i(),{children:[(0,o.jsx)("title",{children:"Team Mitglieder Verwalten | Admin Dashboard"}),(0,o.jsx)("meta",{name:"description",content:"Team Mitglieder Verwaltung f\xfcr das Schulprojekt"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsx)(s.Z,{}),(0,o.jsx)("main",{className:a().main,children:(0,o.jsxs)("div",{style:{width:"100%",maxWidth:"1200px",margin:"0 auto"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"2rem"},children:[(0,o.jsx)("h1",{style:{fontSize:"2rem",color:"var(--title-color)",fontWeight:700,margin:0},children:"Team Mitglieder Verwalten"}),(0,o.jsxs)(h(),{href:"/contact",style:{display:"inline-flex",alignItems:"center",color:"var(--text-light)",textDecoration:"none",padding:"0.5rem 0.75rem",borderRadius:"4px",fontSize:"0.9rem",backgroundColor:"var(--bg-lighter)"},children:[(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"0.5rem"},children:[(0,o.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,o.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]}),"Dashboard"]})]}),(0,o.jsx)("div",{style:{marginBottom:"2rem"},children:(0,o.jsxs)("div",{style:{display:"flex",borderBottom:"1px solid ".concat(t?"#444":"#e0e0e0")},children:[(0,o.jsx)("button",{onClick:()=>f("list"),style:{padding:"0.75rem 1.5rem",border:"none",background:"none",cursor:"pointer",fontWeight:"list"===x?"bold":"normal",color:"list"===x?"var(--accent-blue)":"var(--text-color)",borderBottom:"list"===x?"2px solid var(--accent-blue)":"none",marginBottom:"list"===x?"-1px":"0"},children:"Alle Mitglieder"}),(0,o.jsx)("button",{onClick:R,style:{padding:"0.75rem 1.5rem",border:"none",background:"none",cursor:"pointer",fontWeight:"new"===x?"bold":"normal",color:"new"===x?"var(--accent-blue)":"var(--text-color)",borderBottom:"new"===x?"2px solid var(--accent-blue)":"none",marginBottom:"new"===x?"-1px":"0"},children:"Neues Mitglied"}),"edit"===x&&(0,o.jsx)("button",{style:{padding:"0.75rem 1.5rem",border:"none",background:"none",cursor:"pointer",fontWeight:"bold",color:"var(--accent-blue)",borderBottom:"2px solid var(--accent-blue)",marginBottom:"-1px"},children:"Mitglied bearbeiten"})]})}),"list"===x&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,o.jsxs)("div",{style:{position:"relative",width:"100%",maxWidth:"360px"},children:[(0,o.jsx)("input",{type:"text",placeholder:"Team Mitglieder suchen...",value:l,onChange:e=>m(e.target.value),style:{width:"100%",padding:"0.75rem 1rem 0.75rem 2.5rem",fontSize:"0.9rem",border:"1px solid ".concat(t?"#444":"#e0e0e0"),borderRadius:"4px",backgroundColor:"var(--input-bg)",color:"var(--text-color)"}}),(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-light)"},children:[(0,o.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,o.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})]}),(0,o.jsxs)("button",{onClick:R,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.25rem",backgroundColor:"var(--accent-blue)",color:"white",border:"none",borderRadius:"4px",fontWeight:"500",cursor:"pointer"},children:[(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,o.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Neues Mitglied"]})]}),(0,o.jsx)("div",{style:{backgroundColor:"var(--card-bg)",borderRadius:"8px",overflow:"hidden"},children:(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{style:{backgroundColor:t?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)",textAlign:"left"},children:[(0,o.jsx)("th",{style:{padding:"1rem"},children:"Profilbild"}),(0,o.jsx)("th",{style:{padding:"1rem"},children:"Name"}),(0,o.jsx)("th",{style:{padding:"1rem"},children:"Nachname"}),(0,o.jsx)("th",{style:{padding:"1rem"},children:"Projekt"}),(0,o.jsx)("th",{style:{padding:"1rem"},children:"Spezialisierungen"}),(0,o.jsx)("th",{style:{padding:"1rem",textAlign:"right"},children:"Aktionen"})]})}),(0,o.jsx)("tbody",{children:T.length>0?T.map(e=>(0,o.jsxs)("tr",{style:{borderTop:"1px solid ".concat(t?"#333":"#f0f0f0")},children:[(0,o.jsx)("td",{style:{padding:"1rem"},children:(0,o.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",overflow:"hidden",backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center"},children:e.profileImage?(0,o.jsx)("img",{src:e.profileImage,alt:"".concat(e.name," ").concat(e.nachname),style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,o.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})})}),(0,o.jsx)("td",{style:{padding:"1rem"},children:e.name}),(0,o.jsx)("td",{style:{padding:"1rem"},children:e.nachname}),(0,o.jsx)("td",{style:{padding:"1rem"},children:e.projektId?(0,o.jsx)(h(),{href:"/projects/".concat(e.projektId),style:{color:"var(--accent-blue)",textDecoration:"none"},children:e.projekt}):e.projekt}),(0,o.jsx)("td",{style:{padding:"1rem"},children:(0,o.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.35rem"},children:e.specializations&&e.specializations.map((e,t)=>(0,o.jsx)("span",{style:{fontSize:"0.75rem",padding:"0.15rem 0.5rem",backgroundColor:"rgba(var(--accent-blue-rgb, 0, 163, 255), 0.15)",color:"var(--accent-blue)",borderRadius:"4px"},children:e},t))})}),(0,o.jsx)("td",{style:{padding:"1rem",textAlign:"right"},children:(0,o.jsxs)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[(0,o.jsx)("button",{onClick:()=>W(e),style:{padding:"0.5rem",backgroundColor:"rgba(0, 112, 243, 0.1)",color:"var(--accent-blue)",border:"none",borderRadius:"4px",cursor:"pointer"},children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,o.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,o.jsx)("button",{onClick:()=>_(e.id),style:{padding:"0.5rem",backgroundColor:"rgba(255, 59, 48, 0.1)",color:"#ff3b30",border:"none",borderRadius:"4px",cursor:"pointer"},children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M3 6h18"}),(0,o.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})})]},e.id)):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"6",style:{padding:"2rem",textAlign:"center",color:"var(--text-light)"},children:y?l?"Keine Teammitglieder gefunden, die Ihrer Suche entsprechen.":"Keine Teammitglieder vorhanden. Erstellen Sie ein neues Mitglied.":"Lade Teammitglieder..."})})})]})})]}),("edit"===x||"new"===x)&&(0,o.jsxs)("div",{style:{backgroundColor:"var(--card-bg)",borderRadius:"8px",padding:"2rem"},children:[(0,o.jsx)("h2",{style:{margin:"0 0 1.5rem 0",fontSize:"1.2rem"},children:"new"===x?"Neues Teammitglied erstellen":"Teammitglied bearbeiten"}),(0,o.jsxs)("form",{onSubmit:N,children:[(0,o.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"2rem",marginBottom:"2rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{width:"120px",height:"120px",borderRadius:"50%",overflow:"hidden",backgroundColor:t?"#333":"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",cursor:"pointer"},onClick:()=>{B.current.click()},children:[k.profileImage?(0,o.jsx)("img",{src:k.profileImage,alt:"Profile",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,o.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),(0,o.jsx)("div",{style:{position:"absolute",bottom:"0",left:"0",right:"0",backgroundColor:"rgba(0,0,0,0.6)",color:"white",padding:"0.25rem",fontSize:"0.75rem",textAlign:"center"},children:"Bild \xe4ndern"})]}),(0,o.jsx)("input",{type:"file",ref:B,style:{display:"none"},accept:"image/*",onChange:P})]}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"var(--text-light)"},children:"Name"}),(0,o.jsx)("input",{type:"text",name:"name",value:k.name,onChange:M,required:!0,style:{width:"100%",padding:"0.75rem",fontSize:"0.9rem",border:"1px solid ".concat(t?"#444":"#e0e0e0"),borderRadius:"4px",backgroundColor:"var(--input-bg)",color:"var(--text-color)"}})]}),(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"var(--text-light)"},children:"Nachname"}),(0,o.jsx)("input",{type:"text",name:"nachname",value:k.nachname,onChange:M,required:!0,style:{width:"100%",padding:"0.75rem",fontSize:"0.9rem",border:"1px solid ".concat(t?"#444":"#e0e0e0"),borderRadius:"4px",backgroundColor:"var(--input-bg)",color:"var(--text-color)"}})]})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"var(--text-light)"},children:"Projekt"}),(0,o.jsxs)("select",{name:"projektId",value:k.projektId,onChange:M,required:!0,style:{width:"100%",padding:"0.75rem",fontSize:"0.9rem",border:"1px solid ".concat(t?"#444":"#e0e0e0"),borderRadius:"4px",backgroundColor:"var(--input-bg)",color:"var(--text-color)",appearance:"auto"},children:[(0,o.jsx)("option",{value:"",children:"Bitte w\xe4hlen Sie ein Projekt"}),E.map(e=>(0,o.jsx)("option",{value:e.id.toString(),children:e.title},e.id))]})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"var(--text-light)"},children:"Spezialisierungen"}),(0,o.jsxs)("div",{style:{display:"flex",marginBottom:"1rem"},children:[(0,o.jsx)("input",{type:"text",value:C,onChange:e=>S(e.target.value),placeholder:"Neue Spezialisierung hinzuf\xfcgen",style:{flex:1,padding:"0.75rem",fontSize:"0.9rem",border:"1px solid ".concat(t?"#444":"#e0e0e0"),borderRadius:"4px 0 0 4px",backgroundColor:"var(--input-bg)",color:"var(--text-color)"},onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),A())}}),(0,o.jsx)("button",{type:"button",onClick:A,style:{padding:"0.75rem 1rem",backgroundColor:"var(--accent-blue)",color:"white",border:"none",borderRadius:"0 4px 4px 0",cursor:"pointer"},children:"+"})]}),(0,o.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:k.specializations.map((e,t)=>(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",backgroundColor:"rgba(var(--accent-blue-rgb, 0, 163, 255), 0.15)",color:"var(--accent-blue)",borderRadius:"4px",fontSize:"0.8rem"},children:[e,(0,o.jsx)("button",{type:"button",onClick:()=>O(e),style:{background:"none",border:"none",color:"var(--accent-blue)",cursor:"pointer",padding:"0.1rem",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"\xd7"})]},t))})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem",borderTop:"1px solid ".concat(t?"#444":"#e0e0e0"),paddingTop:"1.5rem"},children:[(0,o.jsx)("button",{type:"button",onClick:()=>f("list"),style:{padding:"0.75rem 1.25rem",backgroundColor:"transparent",color:"var(--text-color)",border:"1px solid ".concat(t?"#444":"#e0e0e0"),borderRadius:"4px",cursor:"pointer"},children:"Abbrechen"}),(0,o.jsx)("button",{type:"submit",disabled:I,style:{padding:"0.75rem 1.25rem",backgroundColor:"var(--accent-blue)",color:"white",border:"none",borderRadius:"4px",cursor:I?"not-allowed":"pointer",opacity:I?.7:1},children:I?"Speichern...":"new"===x?"Erstellen":"Aktualisieren"})]})]})]})]})}),(0,o.jsx)(d.Z,{})]})}(0,u.nY)()}},function(e){e.O(0,[664,371,888,774,179],function(){return e(e.s=5133)}),_N_E=e.O()}]);