"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{4782:function(e,r,n){n.r(r),n.d(r,{default:function(){return u}});var t=n(5893),o=n(7294),l=n(9477),c=n(9365),i=n(7836);function u(e){let{modelPath:r,width:n="100%",height:u="100%"}=e,a=(0,o.useRef)(null),d=(0,o.useRef)(null),s=(0,o.useRef)(null),p=(0,o.useRef)(null),g=(0,o.useRef)(null),h=(0,o.useRef)(null),w=(0,o.useRef)(null),[m,f]=(0,o.useState)(!1),[x,b]=(0,o.useState)(null);return(0,o.useEffect)(()=>{console.log("ThreeJsViewer: Initial setup");let e=new l.xsS;e.background=new l.Ilk(1118481),p.current=e;let r=new l.cPb(75,a.current.clientWidth/a.current.clientHeight,.1,1e3);r.position.z=5,g.current=r;let n=new l.CP7({antialias:!0});n.setSize(a.current.clientWidth,a.current.clientHeight);try{n.outputEncoding=l.KI_}catch(e){console.warn("ThreeJsViewer: Issue setting output encoding:",e)}n.shadowMap.enabled=!0,a.current.appendChild(n.domElement),s.current=n;let t=new l.Mig(16777215,.5);e.add(t);let o=new l.Ox3(16777215,1);o.position.set(5,5,5),o.castShadow=!0,e.add(o);let i=new l.Ox3(16777215,.5);i.position.set(-5,-5,-5),e.add(i);let u=new c.z(r,n.domElement);u.enableDamping=!0,u.dampingFactor=.05,u.autoRotate=!0,u.autoRotateSpeed=1,d.current=u;let m=()=>{if(a.current){let e=a.current.clientWidth,t=a.current.clientHeight;n.setSize(e,t),r.aspect=e/t,r.updateProjectionMatrix()}};window.addEventListener("resize",m);let f=()=>{h.current=requestAnimationFrame(f),d.current&&d.current.update(),n.render(e,r)};return f(),()=>{console.log("ThreeJsViewer: Cleanup"),window.removeEventListener("resize",m),h.current&&cancelAnimationFrame(h.current),s.current&&a.current&&a.current.removeChild(s.current.domElement),w.current&&(e.remove(w.current),w.current=null)}},[]),(0,o.useEffect)(()=>{if(console.log("ThreeJsViewer: Model path changed:",r),!r||!p.current){r||console.warn("ThreeJsViewer: No model path provided"),p.current||console.warn("ThreeJsViewer: Scene not initialized");return}f(!0),b(null),w.current&&(p.current.remove(w.current),w.current=null),p.current&&(p.current.background=new l.Ilk(2236962));let e=new l.lLk;e.onProgress=(e,r,n)=>{console.log("Loading model: ".concat(Math.floor(r/n*100),"%"))},e.onError=e=>{let r="Error loading ".concat(e);console.error(r),b(r),f(!1),p.current&&(p.current.background=new l.Ilk(6689041))},e.onLoad=()=>{console.log("ThreeJsViewer: Loading complete"),f(!1)};let n=new i.E(e);console.log("ThreeJsViewer: Starting to load model from:",r),n.load(r,e=>{console.log("ThreeJsViewer: Model loaded successfully");let r=e.scene,n=new l.ZzF().setFromObject(r),t=n.getCenter(new l.Pa4),o=n.getSize(new l.Pa4),c=Math.max(o.x,o.y,o.z),i=g.current.fov*(Math.PI/180);g.current.position.copy(t),g.current.position.z+=c/(2*Math.tan(i/2))*1.5,g.current.lookAt(t),d.current&&(d.current.target.copy(t),d.current.update()),p.current&&(p.current.background=new l.Ilk(1118481)),p.current.add(r),w.current=r},e=>{let r=e.loaded/e.total*100;console.log("".concat(Math.round(r),"% loaded"))},e=>{let r="Error loading model: ".concat(e.message||e);console.error(r),b(r),f(!1),p.current&&(p.current.background=new l.Ilk(6689041))})},[r]),(0,t.jsxs)("div",{ref:a,style:{width:n,height:u,position:"relative",backgroundColor:"#111",borderRadius:"8px",overflow:"hidden"},children:[m&&(0,t.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0,0,0,0.7)",color:"white",padding:"10px 20px",borderRadius:"8px",zIndex:10},children:"Modell wird geladen..."}),x&&(0,t.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(200,50,50,0.9)",color:"white",padding:"10px 20px",borderRadius:"8px",zIndex:10,textAlign:"center"},children:[(0,t.jsx)("div",{children:"Fehler beim Laden des 3D-Modells"}),(0,t.jsx)("div",{style:{fontSize:"12px",marginTop:"5px"},children:x})]}),(0,t.jsx)("div",{style:{position:"absolute",bottom:"10px",right:"10px",background:"rgba(0,0,0,0.5)",color:"white",padding:"5px 10px",borderRadius:"4px",fontSize:"12px",pointerEvents:"none"},children:"Klicken und ziehen zum Drehen â€¢ Scrollen zum Zoomen"})]})}}}]);